# @vercel/blob

## 0.12.2

### Patch Changes

- 15f7eef: Fix types for old module resolution. Before this commit types for the main package would be imported with a dot in the import path on autocompletion.

## 0.12.1

### Patch Changes

- ae93246: Fix `Cannot find module '@vercel/blob/client' errors for JavaScript projects or TypeScript projects with an old moduleResolution setting.

## 0.12.0

### Minor Changes

- 8251462: This release introduces BREAKING CHANGES. Mostly, we've separated client and server needs better. While ensuring we only export what we currently think is useful to you.

  We have a completely new documentation about client (browser) uploads: https://vercel.com/docs/storage/vercel-blob/quickstart#client-uploads.

  We've moved and renamed client-related utilities, including the ones to generate client tokens, to a separate entry file: `@vercel/blob/client`. Use it this way:

  ```ts
  import {
    upload,
    handleUpload,
    generateClientTokenFromReadWriteToken,
  } from '@vercel/blob/client';
  ```

  Here are the new features:

  - You can now pass a `clientPayload?: string` option during client uploads via the `upload` method. This payload can be used to attach metadata to your file, for example when updating a blog post cover image, you may want to pass: `clientPayload: JSON.stringify({ postId: 123 })`, so you can then use it server side to update the blog post.

  Here are the BREAKING CHANGES:

  - `handleBlobUpload` has moved to client/`handleUpload`
  - For client (browser) uploads, please use client/`upload` instead of `put`. Also, the `handleBlobUploadUrl` option has been renamed to `handleUploadUrl`.
  - `verifyCallbackSignature` is no more exported if you think you need it, open an issue
  - `BlobCommandOptions` type is no longer exported. This is an internal utility type. Other internal types were removed also but nobody was using them
  - `metadata` in `onBeforeGenerateToken` and `onUploadCompleted` has been renamed to `tokenPayload`

  Enjoy!

## 0.11.0

### Minor Changes

- b409aad: We added two new options on `put()`:

  - `addRandomSuffix: boolean`: Allows to disable or enable (default) random
    suffixes added to file paths
  - `cacheControlMaxAge: number`: Allows to configure the browser and edge cache,
    in seconds. Default to one year (browser) and 5 minutes (edge). The edge cache
    is currently always set to a maximum of 5 minutes. But can be lowered to 0

## 0.10.0

### Minor Changes

- e273673: BREAKING CHANGE: Some methods responses and types have been updated following a
  migration Vercel did to make Vercel Blob more robust and closer to the S3 API.

  Namely:

  - the urls generated by Vercel Blob have moved from:
    `public.blob.vercel-storage.com/zyzoioy8txfs14xe/somefile-NoOVGDVcqSPc7VYCUAGnTzLTG2qEM2.txt`
    to
    `zyzoioy8txfs14xe.blob.vercel-storage.com/somefile-NoOVGDVcqSPc7VYCUAGnTzLTG2qEM2.txt`
    This change has been done transparently: all previous blob urls are
    redirected to the new domain.
  - `.put()` no more sends back size and uploadedAt, use .head() to get this
    information. Refer to the PutBlobResult type.
  - `.list()` no more sends back contentType and contentDisposition on the
    blobs property. Refer to the ListBlobResult type.
  - `.del()` doesn't return any value (void). If the file was here prior to
    a del() call, then it's now deleted.
  - `BlobResult` type has been splitted to `PutBlobResult` for put() and
    `HeadBlobResult` for head(). Use them accordingly.

  We've reworked our README to better surface the browser-upload and
  server-upload methods.

## 0.9.3

### Patch Changes

- 978a817: Added an API version string when activated, related to multi bucket migration, no need to update for now.

## 0.9.2

### Patch Changes

- ce4b585: Add handleBlobUpload wrapper

## 0.9.1

### Patch Changes

- 08caff4: expose validUntil field

## 0.9.0

### Minor Changes

- 28ba58d: Implement Client Upload

## 0.8.3

### Patch Changes

- e976847: Align license to Apache 2.0 and fix urls in package.json

## 0.8.2

### Patch Changes

- 04e175d: fix response updateAt format

## 0.8.1

### Patch Changes

- Add missing url in blob type

## 0.8.0

### Minor Changes

- feat(API): Cleanup API responses

## 0.7.0

### Minor Changes

- 543a52e: restore list

## 0.6.3

### Patch Changes

- 5059992: remove list

## 0.6.2

### Patch Changes

- afa1e7a: send content-type

## 0.6.1

### Patch Changes

- fix vercelBlob.del to send back a single object or array when relevant to input

## 0.6.0

### Minor Changes

- del will now send back `HeadBlobResult | (HeadBlobResult | null)[] | null` based on how it's used and which blobs were deleted or not

## 0.5.0

### Minor Changes

- 45fd785: Implement bulk delete

## 0.4.0

### Minor Changes

- Add error handling

## 0.3.2

### Patch Changes

- Handle access denied deletions

## 0.3.1

### Patch Changes

- Release again

## 0.3.0

### Minor Changes

- e29855d: add blob list

## 0.2.6

### Patch Changes

- 5f6fe14: Test new release

## 0.2.5

### Patch Changes

- Test changeset in monorepo

## 0.2.4

### Patch Changes

- 39b15f2: Move from BLOB_STORE_WRITE_TOKEN to BLOB_READ_WRITE_TOKEN

## 0.2.1

### Patch Changes

- 969ef14: Fix filename computation

## 0.2.0

### Minor Changes

- a0f5d03: Added new methods

## 0.1.3

### Patch Changes

- e7e259e: Test releasing

## 0.1.0

### Minor Changes

- 33b712b: First "version"

## 0.0.2

### Patch Changes

- d1ec473: Testing changeset
- c33db99: Testing publish
